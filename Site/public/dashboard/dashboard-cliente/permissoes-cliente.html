<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>Permissões | Dashboard</title>
    <link rel="shortcut icon" href="../../assets/assets/images/logosProjeto/flaticon-HOPTECH-white.png"
        type="image/x-icon"> <!-- Flaticon -->

    <link rel="stylesheet" href="css/permissao.css">
    <link rel="stylesheet" href="css/styleDashboard.css"> <!-- Importando CSS do dashboard -->
</head>

<body id="dashboard">
    <div class="div_menu_lateral">
        <a href="../../hoptech-site/site-hoptech.html"><img src="../../assets/images/logosProjeto/HopTech-dark.png"
            class="logo_hoptech" alt="Logo da HopTech"></a>
        <button id="menu_dashboard" class="pageAtual" onclick="goDashboard()">
            <img src="../../assets/images/icons/dashboard.png" class="icons_menu" alt="Ícone do dashboard">
            Dashboard
        </button>
        <button id="menu_cadastros" onclick="goUsuario()">
            <img src="../../assets/images/icons/icon_usuarios.png" class="icons_menu" style="width: 40px;"
                alt="Ícone de usuários">
            Usuários
        </button>
        <button id="menu_perms" onclick="goPermissoes()">
            <img src="../../assets/images/icons/permissao.png" class="icons_menu" alt="Ícone de Permissões">
            Permissões
        </button>
        <button id="menu_plantacoes" onclick="goPlantacao()">
            <img src="../../assets/images/icons/iconeLupulo.png" class="icons_menu" style="width: 40px;"
                alt="Ícone de usuários">
            Plantações
        </button>
        <button id="menu_hist" onclick="goHistorico()">
            <img src="../../assets/images/icons/iconeHistorico.png" class="icons_menu" style="width: 30px;"
                alt="Ícone do histórico">
            Histórico
        </button>
        <footer>
            <a href="../../nextpoint-site/index.html"><img src="../../assets/images/logosProjeto/NEXTPOINT.png"
                    class="logo_empresa" alt="Logo da NEXTPOINT"></a>
            © 2023 HopTech
        </footer>
    </div>
    <div class="div_conteiner_conteudo">
        <div class="div_menu_top">
            <div><!--  --></div>
            <h3 class="titleDashboardCliente">Gerenciamento - <span id="empresaNome">EMPRESA_NOME</span> - <span id="usuarioNome">USUARIO_NOME</span></h3>
            <button class="btnSair" onclick="sair(); return false">Sair</button>
        </div>
        <div class="conteiner_cadastro_usuarios">
            <div class="box_cadastro_usuarios">
                <div class="tabela_gerenciamento">
                    <h2>Gerenciar Funcionários e Permissões</h2> <br>
                    <table class="tabela_usuarios">
                        <tr class="tr1">
                            <th>Nome</th>
                            <th>Plantação</th>
                            <th>Excluir</th>
                            <th class="th_end">Editar</th>
                        </tr>
                    </table>
                </div>
                <div class="imagem_cadastro_usuarios">
                </div>
            </div>
        </div>
    </div>
    </div>

    </div>
    </div>
</body>

</html>

<!-- Importando a biblioteca ChartJS: -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<!-- Importando o plugin DataLabels do ChartJS: -->
<script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels"></script>
<!-- Importando o back-end do ChartJS: -->

<script src="js/funcoes.js"></script>
<script type="text/javascript" nonce="{coloque_seu_valor_nonce_aqui}" src="https://desk.zoho.com/portal/api/web/inapp/858677000000226265?orgId=810882795" defer></script>
<script>
    function puxarUsuariosEmpresa(fkEmpresa){

        fetch(`/usuarios/puxarFuncionarios/${fkEmpresa}`, {cache: 'no-store'})
        .then(function (response) {
            console.log(response)
            if (response.ok) {
                response.json().then(function (resposta) {
                    console.log(`Dados recebidos: ${JSON.stringify(resposta)}`);
                    console.log(resposta)
                    for(i in resposta){
                        document.querySelector('.tabela_usuarios').innerHTML += `
                        <tr>
                            <th>${resposta[i].usuario}</th>
                            <th>${resposta[i].fkPlantacao}</th>
                            <th onclick="excluirFuncionario()" class="th_function">Excluir</th>
                            <th class="th_end th_function">Editar</th>

                        </tr>`
                    }
                });
            } else {
                console.error('Nenhum dado encontrado ou erro na API');
            }
        })
    }
    puxarUsuariosEmpresa(sessionStorage.getItem('FK_EMPRESA'))
</script>